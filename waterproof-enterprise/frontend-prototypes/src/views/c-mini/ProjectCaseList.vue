<script setup>
// å·¥ç¨‹æ¡ˆä¾‹åˆ—è¡¨é¡µé¢
import { ref, onMounted } from 'vue'
import { useRouter } from 'vue-router'
import { ArrowLeft, Search } from '@element-plus/icons-vue'

const router = useRouter()

// å·¥ç¨‹æ¡ˆä¾‹æ•°æ®
const projectCases = ref([
  { id: 1, title: 'æŸå°åŒºå±‹é¡¶è¡¥æ¼å·¥ç¨‹', description: 'è§£å†³äº†å°åŒº20æ ‹æ¥¼çš„å±‹é¡¶æ¼æ°´é—®é¢˜', image: '/images/waterproof-1.jpg', category: 'å±‹é¡¶è¡¥æ¼', date: '2025-12-01' },
  { id: 2, title: 'æŸé…’åº—å«ç”Ÿé—´é˜²æ°´æ”¹é€ ', description: 'å…¨é¢æ”¹é€ é…’åº—100é—´å®¢æˆ¿çš„å«ç”Ÿé—´é˜²æ°´', image: '/images/waterproof-2.jpg', category: 'å«ç”Ÿé—´æ¼æ°´', date: '2025-11-20' },
  { id: 3, title: 'æŸå•†ä¸šç»¼åˆä½“å¤–å¢™é˜²æ°´å·¥ç¨‹', description: 'ä¸ºå¤§å‹å•†ä¸šç»¼åˆä½“æä¾›å¤–å¢™é˜²æ°´è§£å†³æ–¹æ¡ˆ', image: '/images/waterproof-1.jpg', category: 'å¤–å¢™é˜²æ°´', date: '2025-11-10' },
  { id: 4, title: 'æŸåˆ«å¢…åœ°ä¸‹å®¤é˜²æ°´å¤„ç†', description: 'è§£å†³åˆ«å¢…åœ°ä¸‹å®¤æ½®æ¹¿æ¼æ°´é—®é¢˜', image: '/images/waterproof-2.jpg', category: 'åœ°ä¸‹å®¤é˜²æ°´', date: '2025-10-25' },
  { id: 5, title: 'æŸå­¦æ ¡å¨æˆ¿é˜²æ°´ç¿»æ–°', description: 'ä¸ºå­¦æ ¡é£Ÿå ‚å¨æˆ¿è¿›è¡Œé˜²æ°´ç¿»æ–°å·¥ç¨‹', image: '/images/waterproof-1.jpg', category: 'å¨æˆ¿æ¼æ°´', date: '2025-10-15' },
  { id: 6, title: 'æŸå†™å­—æ¥¼é˜³å°é˜²æ°´ç»´ä¿®', description: 'ç»´ä¿®å†™å­—æ¥¼å¤šä¸ªé˜³å°çš„é˜²æ°´é—®é¢˜', image: '/images/waterproof-2.jpg', category: 'é˜³å°æ¼æ°´', date: '2025-10-05' }
])

// æœç´¢å…³é”®è¯
const searchKeyword = ref('')

// è¿”å›é¦–é¡µ
const goBack = () => {
  router.push('/c-mini/home')
}

// è·³è½¬åˆ°æ¡ˆä¾‹è¯¦æƒ…
const goToCaseDetail = (caseId) => {
  router.push('/c-mini/project-case-detail/' + caseId)
}

// æœç´¢æ¡ˆä¾‹
const searchCases = () => {
  console.log('æœç´¢æ¡ˆä¾‹:', searchKeyword.value)
  // è¿™é‡Œå¯ä»¥æ·»åŠ æœç´¢é€»è¾‘
}

onMounted(() => {
  console.log('å·¥ç¨‹æ¡ˆä¾‹åˆ—è¡¨é¡µé¢åŠ è½½')
})
</script>

<template>
  <div class="project-case-list-page" style="min-height: 100vh; background-color: #f5f7fa; padding-bottom: 100px;">
    <!-- é¡µé¢æ ‡é¢˜æ  -->
    <div style="background-color: #E60012; border-bottom-left-radius: 32px; border-bottom-right-radius: 32px; padding: 20px 20px 30px; text-align: center; position: relative;">
      <a href="/c-mini/home" style="position: absolute; left: 10px; top: 10px; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px; cursor: pointer; z-index: 99999; background: rgba(255,255,255,0.1); border-radius: 50%; text-decoration: none;">
        <el-icon><ArrowLeft /></el-icon>
      </a>
      <div style="color: white; font-size: 20px; font-weight: 700; margin: 0;">å·¥ç¨‹æ¡ˆä¾‹</div>
    </div>

    <!-- æœç´¢æ  -->
    <div style="padding: 16px;">
      <div style="background: white; border: 1px solid #E5E7EB; border-radius: 20px; padding: 8px 16px; display: flex; align-items: center; gap: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
        <el-icon style="color: #6b7280;"><Search /></el-icon>
        <input 
          v-model="searchKeyword" 
          type="text" 
          placeholder="æœç´¢å·¥ç¨‹æ¡ˆä¾‹" 
          style="flex: 1; border: none; outline: none; font-size: 14px; color: #111827;"
          @keyup.enter="searchCases"
        >
        <button 
          @click="searchCases" 
          style="background: #E60012; color: white; border: none; padding: 6px 16px; border-radius: 12px; font-size: 14px; font-weight: 500; cursor: pointer;"
        >
          æœç´¢
        </button>
      </div>
    </div>

    <!-- å·¥ç¨‹æ¡ˆä¾‹åˆ—è¡¨ -->
    <div style="padding: 0 16px;">
      <div style="font-size: 14px; color: #6b7280; margin-bottom: 12px;">å…± {{ projectCases.length }} ä¸ªå·¥ç¨‹æ¡ˆä¾‹</div>
      
      <!-- æ¡ˆä¾‹åˆ—è¡¨é¡¹ -->
      <div style="display: grid; grid-template-columns: 1fr; gap: 16px; margin-bottom: 16px;">
        <div 
          v-for="caseItem in projectCases" 
          :key="caseItem.id" 
          @click="goToCaseDetail(caseItem.id)"
          style="background: white; border: 1px solid #E5E7EB; border-radius: 20px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1); cursor: pointer; transition: all 0.3s ease;"
          @mouseenter="$event.target.style.boxShadow = '0 6px 20px rgba(0,0,0,0.15)'"
          @mouseleave="$event.target.style.boxShadow = '0 4px 12px rgba(0,0,0,0.1)'"
        >
          <!-- æ¡ˆä¾‹å›¾ç‰‡ -->
          <div style="width: 100%; height: 160px; overflow: hidden;">
            <img :src="caseItem.image" style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s ease;"
                 @mouseenter="$event.target.style.transform = 'scale(1.05)'"
                 @mouseleave="$event.target.style.transform = 'scale(1)'">
          </div>
          
          <!-- æ¡ˆä¾‹ä¿¡æ¯ -->
          <div style="padding: 16px;">
            <!-- åˆ†ç±»å’Œæ—¥æœŸ -->
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
              <div style="font-size: 12px; color: #E60012; background: #FFF0F0; padding: 2px 8px; border-radius: 12px; display: inline-block;">
                {{ caseItem.category }}
              </div>
              <div style="font-size: 12px; color: #9ca3af;">{{ caseItem.date }}</div>
            </div>
            
            <!-- æ¡ˆä¾‹æ ‡é¢˜ -->
            <div style="font-size: 16px; font-weight: bold; color: #111827; margin-bottom: 8px;">
              {{ caseItem.title }}
            </div>
            
            <!-- æ¡ˆä¾‹æè¿° -->
            <div style="font-size: 14px; color: #6b7280; line-height: 1.5; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
              {{ caseItem.description }}
            </div>
          </div>
        </div>
      </div>
      
      <!-- ç©ºçŠ¶æ€ -->
      <div v-if="projectCases.length === 0" style="background: white; border-radius: 20px; padding: 40px 20px; text-align: center; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
        <div style="font-size: 48px; margin-bottom: 16px;">ğŸ—ï¸</div>
        <div style="font-size: 16px; color: #6b7280; margin-bottom: 8px;">æš‚æ— å·¥ç¨‹æ¡ˆä¾‹</div>
        <div style="font-size: 14px; color: #9ca3af;">è¯·å°è¯•å…¶ä»–æœç´¢æ¡ä»¶</div>
      </div>
    </div>
  </div>
</template>

<style scoped>
.project-case-list-page {
  padding-bottom: 100px;
}
</style>
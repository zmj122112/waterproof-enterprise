# 师傅端 - 施工记录原型设计

## 一、页面概述

### 1.1 页面定位
- 为防水工程师傅提供施工记录管理功能
- 支持记录施工过程中的关键信息，包括施工时间、施工内容、使用物料等
- 提供施工照片上传功能，方便记录施工前后的对比
- 支持施工进度更新和完工确认
- 提供施工记录的查询和统计功能

### 1.2 页面结构

```
┌─────────────────────────────────────────────────────────────────────────┐
│                              顶部导航栏                                 │
│  ┌───────────┐  ┌───────────────────────────────────┐  ┌───────────┐   │
│  │  返回     │  │          施工记录                │  │  保存     │   │
│  └───────────┘  └───────────────────────────────────┘  └───────────┘   │
└─────────────────────────────────────────────────────────────────────────┘
┌─────────────────────────────────────────────────────────────────────────┐
│                              工单基本信息                              │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  工单编号：WD20231015001                                      │   │
│  │  服务类型：上门检测（免费）                                    │   │
│  │  客户名称：企业客户A                                             │   │
│  │  施工地址：XX区XX街道XX小区XX号楼XX单元XX室                      │   │
│  └─────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────┘
┌─────────────────────────────────────────────────────────────────────────┐
│                              施工记录表单                               │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                     施工日期选择                              │   │
│  │  ┌───────────────┐  ┌─────────────────────────────────────┐  │   │
│  │  │  施工日期：   │  │  日期选择器                          │  │   │
│  │  └───────────────┘  └─────────────────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                     施工内容描述                              │   │
│  │  ┌─────────────────────────────────────────────────────────┐  │   │
│  │  │                     多行文本框                          │  │   │
│  │  │  请详细描述施工内容，如：施工区域、施工工艺、施工步骤等    │  │   │
│  │  └─────────────────────────────────────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                     使用物料记录                              │   │
│  │  ┌─────────────────────────────────────────────────────────┐  │   │
│  │  │  物料名称  │  规格型号  │  使用数量  │  单位      │  操作      │  │   │
│  │  └─────────────────────────────────────────────────────────┘  │   │
│  │  ┌─────────────────────────────────────────────────────────┐  │   │
│  │  │  防水材料A  │  10kg/桶    │  2        │  桶        │  删除      │  │   │
│  │  └─────────────────────────────────────────────────────────┘  │   │
│  │  ┌─────────────────────────────────────────────────────────┐  │   │
│  │  │                     添加物料按钮                          │  │   │
│  │  └─────────────────────────────────────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                     施工照片上传                              │   │
│  │  ┌─────────────────────────────────────────────────────────┐  │   │
│  │  │                     施工前照片上传                          │  │   │
│  │  │  ┌───────────┐  ┌───────────┐  ┌───────────┐  ┌───────────┐  │  │   │
│  │  │  │  上传     │  │  上传     │  │  上传     │  │  上传     │  │  │   │
│  │  │  └───────────┘  └───────────┘  └───────────┘  └───────────┘  │  │   │
│  │  └─────────────────────────────────────────────────────────┘  │   │
│  │  ┌─────────────────────────────────────────────────────────┐  │   │
│  │  │                     施工后照片上传                          │  │   │
│  │  │  ┌───────────┐  ┌───────────┐  ┌───────────┐  ┌───────────┐  │  │   │
│  │  │  │  上传     │  │  上传     │  │  上传     │  │  上传     │  │  │   │
│  │  │  └───────────┘  └───────────┘  └───────────┘  └───────────┘  │  │   │
│  │  └─────────────────────────────────────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                     施工进度更新                              │   │
│  │  ┌───────────────┐  ┌─────────────────────────────────────┐  │   │
│  │  │  施工进度：   │  │  下拉选择框（准备中、施工中、已完成）  │  │   │
│  │  └───────────────┘  └─────────────────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                     客户确认信息                              │   │
│  │  ┌───────────────┐  ┌─────────────────────────────────────┐  │   │
│  │  │  客户签名：   │  │  签名区域                          │  │   │
│  │  └───────────────┘  └─────────────────────────────────────┘  │   │
│  │  ┌───────────────┐  ┌─────────────────────────────────────┐  │   │
│  │  │  确认日期：   │  │  日期选择器                          │  │   │
│  │  └───────────────┘  └─────────────────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────┘
```

### 1.3 交互设计

#### 1.3.1 顶部导航栏
- **返回**：点击返回上一页
- **保存**：点击保存当前施工记录
  - 动画效果：点击时显示保存中提示，保存成功后显示成功提示

#### 1.3.2 工单基本信息
- 显示当前施工记录关联的工单基本信息
- 支持点击查看完整工单详情

#### 1.3.3 施工记录表单
- **施工日期选择**：
  - 点击弹出日期选择器，选择施工日期
  - 动画效果：日期选择器弹出/收起时的滑动动画

- **施工内容描述**：
  - 支持多行文本输入，实时显示输入字数
  - 提供常用施工内容模板，方便快速填写
  - 动画效果：输入时的平滑滚动效果

- **使用物料记录**：
  - 显示已添加的物料列表
  - **删除**：点击删除对应的物料记录
  - **添加物料**：点击弹出物料选择对话框，选择并添加物料
  - 动画效果：
    - 删除按钮点击时的缩放+颜色变化效果
    - 添加物料时的弹出动画

- **施工照片上传**：
  - **施工前照片**：点击上传按钮，从相册选择或拍照上传施工前照片
  - **施工后照片**：点击上传按钮，从相册选择或拍照上传施工后照片
  - 支持多张照片上传，最多支持4张
  - 上传成功后显示缩略图，支持预览和删除
  - 动画效果：
    - 上传按钮点击时的缩放+颜色变化效果
    - 照片上传成功后的淡入效果
    - 照片预览时的放大动画

- **施工进度更新**：
  - 下拉选择施工进度：准备中、施工中、已完成
  - 选择已完成时，自动更新完工日期
  - 动画效果：下拉选择时的展开/收起动画

- **客户确认信息**：
  - **客户签名**：点击签名区域，弹出签名画板，支持手写签名
  - **确认日期**：自动填充当前日期，支持修改
  - 动画效果：
    - 签名画板弹出/收起时的滑动动画
    - 签名时的平滑绘制效果

### 1.4 设计规范

#### 1.4.1 颜色方案
- 主色调：蓝色 (#1890ff) - 代表专业、信任
- 辅助色：
  - 成功色：绿色 (#52c41a) - 代表保存成功
  - 警告色：黄色 (#faad14) - 代表施工中状态
  - 错误色：红色 (#ff4d4f) - 代表删除操作
- 背景色：白色 (#ffffff)
- 文字色：深灰色 (#333333)、中灰色 (#666666)、浅灰色 (#999999)
- 边框色：淡灰色 (#e8e8e8)

#### 1.4.2 字体方案
- 标题：16px - 18px，粗体
- 正文：14px - 16px，常规
- 辅助文字：12px，常规
- 工单编号：14px，粗体，蓝色 (#1890ff)

#### 1.4.3 图标方案
- 使用简洁、直观的线性图标
- 图标颜色与文字颜色保持一致
- 交互元素图标添加反馈效果
- 状态图标：使用不同颜色区分不同状态

### 1.5 页面原型图

#### 1.5.1 施工记录原型图

![施工记录原型图](images/construction-record.png)

#### 1.5.2 交互流程图

```
┌─────────────────────────────────────────────────────────────────────────┐
│                              施工记录页面                              │
├─────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                  填写施工基本信息                              │   │
│  │                  ┌─────────────────┐                           │   │
│  │                  │  施工日期选择   │                           │   │
│  │                  │  施工内容描述   │                           │   │
│  │                  └─────────────────┘                           │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                               │                                       │
│                               ▼                                       │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                  管理使用物料记录                              │   │
│  │                  ┌─────────────────┐                           │   │
│  │                  │  添加物料       │                           │   │
│  │                  │  删除物料       │                           │   │
│  │                  └─────────────────┘                           │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                               │                                       │
│                               ▼                                       │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                  上传施工照片                                  │   │
│  │                  ┌─────────────────┐                           │   │
│  │                  │  上传施工前照片   │                           │   │
│  │                  │  上传施工后照片   │                           │   │
│  │                  └─────────────────┘                           │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                               │                                       │
│                               ▼                                       │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                  更新施工进度                                  │   │
│  │                  ┌─────────────────┐                           │   │
│  │                  │  选择施工进度   │                           │   │
│  │                  │  准备中/施工中/已完成  │                           │   │
│  │                  └─────────────────┘                           │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                               │                                       │
│                               ▼                                       │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                  添加客户确认信息                              │   │
│  │                  ┌─────────────────┐                           │   │
│  │                  │  客户签名       │                           │   │
│  │                  │  确认日期       │                           │   │
│  │                  └─────────────────┘                           │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                               │                                       │
│                               ▼                                       │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                  点击「保存」按钮                                │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                               │                                       │
│                               ▼                                       │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                  保存施工记录                                  │   │
│  │                  ┌─────────────────┐                           │   │
│  │                  │  保存成功       │  ──►  显示成功提示           │   │
│  │                  │  保存失败       │  ──►  显示错误提示           │   │
│  │                  └─────────────────┘                           │   │
│  └─────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────┘
```

### 1.6 技术实现建议

#### 1.6.1 前端框架
- 使用微信小程序原生开发
- 或使用 Taro、uni-app 等跨端框架

#### 1.6.2 交互实现
- 使用微信小程序的 animation API 实现动画效果
- 使用 wx.chooseImage API 实现照片上传
- 使用 wx.canvas API 实现手写签名功能
- 使用 wx.showToast、wx.showLoading 等 API 实现反馈效果

#### 1.6.3 数据来源
- 工单数据：调用后台工单管理服务 API
- 物料数据：调用后台物料管理服务 API
- 施工记录数据：调用后台施工记录服务 API

## 二、原型使用说明

### 2.1 如何查看原型
- 使用微信开发者工具打开原型文件夹
- 或使用在线原型工具（如 Axure、Figma）查看交互原型

### 2.2 如何进行交互测试
- 填写施工基本信息，测试表单输入
- 添加和删除使用物料，测试物料管理功能
- 上传施工照片，测试照片上传功能
- 更新施工进度，测试进度更新功能
- 添加客户签名，测试签名功能
- 点击保存按钮，测试保存功能

### 2.3 如何提供反馈
- 记录需要修改的页面或交互
- 标注具体的修改建议
- 提供参考示例（如有）

## 三、后续迭代计划

### 3.1 优化施工内容模板，支持自定义模板
### 3.2 增加施工记录的导出功能，支持导出PDF格式
### 3.3 优化照片上传功能，支持图片压缩和水印添加
### 3.4 增加施工记录的统计分析功能
### 3.5 优化移动端适配，确保在不同设备上显示正常
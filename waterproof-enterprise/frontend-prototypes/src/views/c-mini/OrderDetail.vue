<script setup>
// è®¢å•è¯¦æƒ…é¡µé¢
import { ref, onMounted } from 'vue'
import { useRoute, useRouter } from 'vue-router'
import { ArrowLeft, Document, User, Phone, Location } from '@element-plus/icons-vue'

const route = useRoute()
const router = useRouter()
const orderId = ref(route.params.id || 'WD20231015001')

// è®¢å•è¯¦æƒ…æ•°æ®
const orderDetail = ref({
  id: orderId.value,
  status: 'å¾…åˆ†é…',
  type: 'ä¸Šé—¨æ£€æµ‹',
  createTime: '2023-10-15',
  amount: 'Â¥200',
  category: 'å±‹é¡¶è¡¥æ¼',
  customerName: 'å¼ ä¸‰',
  customerPhone: '13800138000',
  address: 'ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºå¼ æ¨è·¯1000å·',
  description: 'å±‹é¡¶æ¼æ°´ï¼Œéœ€è¦ä¸Šé—¨æ£€æµ‹å’Œç»´ä¿®',
  assignedMaster: '',
  masterPhone: '',
  scheduleTime: '',
  progress: [
    { step: 1, title: 'æäº¤è®¢å•', status: 'completed', time: '2023-10-15 10:30' },
    { step: 2, title: 'è®¢å•å®¡æ ¸', status: 'completed', time: '2023-10-15 10:35' },
    { step: 3, title: 'å¸ˆå‚…åˆ†é…', status: 'pending', time: '' },
    { step: 4, title: 'ä¸Šé—¨æœåŠ¡', status: 'pending', time: '' },
    { step: 5, title: 'æœåŠ¡å®Œæˆ', status: 'pending', time: '' },
    { step: 6, title: 'è¯„ä»·å®Œæˆ', status: 'pending', time: '' }
  ]
})

// è¿”å›è®¢å•åˆ—è¡¨
const goBack = () => {
  router.push('/c-mini/order-list')
}

onMounted(() => {
  console.log('è®¢å•è¯¦æƒ…é¡µé¢åŠ è½½ï¼Œè®¢å•ID:', orderId.value)
})
</script>

<template>
  <div class="order-detail-page" style="background-color: #f3f4f6; min-height: 100vh;">
    <!-- çº¢è‰²åº•éƒ¨èˆå° Header -->
    <div style="background-color: #E60012; border-bottom-left-radius: 32px; border-bottom-right-radius: 32px; padding: 20px 20px 30px; text-align: center; position: relative;">
      <a href="/c-mini/order-list" style="position: absolute; left: 10px; top: 10px; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px; cursor: pointer; z-index: 99999; background: rgba(255,255,255,0.1); border-radius: 50%; text-decoration: none;">
        <el-icon><ArrowLeft /></el-icon>
      </a>
      <div style="color: white; font-size: 20px; font-weight: 700; margin: 0;">è®¢å•è¯¦æƒ…</div>
    </div>

    <!-- è®¢å•åŸºæœ¬ä¿¡æ¯ -->
    <div style="padding: 20px;">
      <!-- è®¢å•çŠ¶æ€ -->
      <div style="background-color: white; border-radius: 16px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); padding: 16px; margin-bottom: 20px;">
        <div style="display: flex; align-items: center; gap: 12px;">
          <div style="width: 48px; height: 48px; background: #E60012; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px; font-weight: bold;">ğŸ“‹</div>
          <div>
            <div style="font-size: 18px; font-weight: bold; margin-bottom: 4px;">{{ orderDetail.status }}</div>
            <div style="font-size: 14px; color: #6b7280;">è®¢å•ç¼–å·ï¼š{{ orderDetail.id }}</div>
          </div>
        </div>
      </div>
      
      <!-- è®¢å•ä¿¡æ¯ -->
      <div style="background-color: white; border-radius: 16px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); padding: 16px; margin-bottom: 20px;">
        <div style="font-size: 16px; font-weight: 600; color: #111827; margin-bottom: 16px;">è®¢å•ä¿¡æ¯</div>
        
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
          <div style="display: flex; align-items: center; gap: 8px;">
            <div style="font-size: 14px; color: #6b7280;">æœåŠ¡ç±»å‹</div>
          </div>
          <div style="font-size: 14px; font-weight: 500; color: #111827;">{{ orderDetail.type }}</div>
        </div>
        
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
          <div style="display: flex; align-items: center; gap: 8px;">
            <div style="font-size: 14px; color: #6b7280;">æœåŠ¡é¡¹ç›®</div>
          </div>
          <div style="font-size: 14px; font-weight: 500; color: #111827;">{{ orderDetail.category }}</div>
        </div>
        
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
          <div style="display: flex; align-items: center; gap: 8px;">
            <div style="font-size: 14px; color: #6b7280;">åˆ›å»ºæ—¶é—´</div>
          </div>
          <div style="font-size: 14px; font-weight: 500; color: #111827;">{{ orderDetail.createTime }}</div>
        </div>
        
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div style="display: flex; align-items: center; gap: 8px;">
            <div style="font-size: 14px; color: #6b7280;">æœåŠ¡é‡‘é¢</div>
          </div>
          <div style="font-size: 20px; font-weight: bold; color: #E60012;">{{ orderDetail.amount }}</div>
        </div>
      </div>
      
      <!-- å®¢æˆ·ä¿¡æ¯ -->
      <div style="background-color: white; border-radius: 16px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); padding: 16px; margin-bottom: 20px;">
        <div style="font-size: 16px; font-weight: 600; color: #111827; margin-bottom: 16px;">å®¢æˆ·ä¿¡æ¯</div>
        
        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
          <el-icon color="#6b7280"><User /></el-icon>
          <div style="font-size: 14px; color: #111827;">{{ orderDetail.customerName }}</div>
        </div>
        
        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
          <el-icon color="#6b7280"><Phone /></el-icon>
          <div style="font-size: 14px; color: #111827;">{{ orderDetail.customerPhone }}</div>
        </div>
        
        <div style="display: flex; align-items: flex-start; gap: 12px;">
          <el-icon color="#6b7280" style="margin-top: 2px;"><Location /></el-icon>
          <div style="font-size: 14px; color: #111827; flex: 1;">{{ orderDetail.address }}</div>
        </div>
      </div>
      
      <!-- è®¢å•è¿›åº¦ -->
      <div style="background-color: white; border-radius: 16px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); padding: 16px;">
        <div style="font-size: 16px; font-weight: 600; color: #111827; margin-bottom: 16px;">è®¢å•è¿›åº¦</div>
        
        <el-timeline>
          <el-timeline-item 
            v-for="(item, index) in orderDetail.progress" 
            :key="item.step"
            :timestamp="item.time"
            :type="item.status === 'completed' ? 'success' : 'info'"
          >
            {{ item.title }}
          </el-timeline-item>
        </el-timeline>
      </div>
      
      <!-- åº•éƒ¨æ“ä½œæŒ‰é’® -->
      <div style="margin-top: 20px; display: flex; gap: 12px;">
        <el-button type="info" round style="flex: 1;">
          <Phone style="margin-right: 8px;" />
          è”ç³»å®¢æœ
        </el-button>
        <el-button 
          v-if="orderDetail.status === 'å¾…åˆ†é…'" 
          type="primary" 
          round 
          style="flex: 1;"
        >
          å–æ¶ˆè®¢å•
        </el-button>
        <el-button 
          v-if="orderDetail.status === 'å·²å®Œæˆ'" 
          type="success" 
          round 
          style="flex: 1;"
        >
          è¯„ä»·è®¢å•
        </el-button>
      </div>
    </div>
  </div>
</template>

<style scoped>
.order-detail-page {
  padding-bottom: 80px; /* ä¸ºåº•éƒ¨å¯¼èˆªæ ç•™å‡ºç©ºé—´ */
}
</style>
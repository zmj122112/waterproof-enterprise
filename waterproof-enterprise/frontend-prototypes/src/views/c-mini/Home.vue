<script setup>
import { ref, onMounted } from 'vue'
import { useRouter } from 'vue-router'
import { User } from '@element-plus/icons-vue'
// ç§»é™¤ Lucide å›¾æ ‡ä¾èµ–ï¼Œæš‚æ—¶ç”¨ emoji æˆ– element å›¾æ ‡ä»£æ›¿ï¼Œé˜²æ­¢æŠ¥é”™
// å¦‚æœä½ ç¡®è®¤ç¯å¢ƒé‡Œæœ‰ lucideï¼Œå¯ä»¥ä¿ç•™å¯¼å…¥ï¼Œä½†ä¸‹æ–¹æ¨¡æ¿é‡Œæˆ‘æ”¹ç”¨äº†æ›´é€šç”¨çš„å†™æ³•

const router = useRouter()

// è½®æ’­å›¾æ•°æ®
const carouselItems = [
  { 
    id: 1, 
    image: '/images/waterproof-1.png', 
    title: 'æœˆæ˜Ÿé˜²æ°´ å§‹äº1954', 
    subtitle: '70å¹´å›½ä¼æ‹…å½“ ä¸“ä¸šåšå®ˆ',
    link: '/c-mini/trust/background'
  },
  { 
    id: 2, 
    image: '/images/waterproof-2.png', 
    title: 'æ ‡å‡†åŒ–å·¥è‰º Â· æ‹’ç»å¤æ¼', 
    subtitle: '9å¤§æ–½å·¥æµç¨‹ï¼ŒISOè´¨é‡è®¤è¯',
    link: '/c-mini/trust/standard'
  },
  { 
    id: 3, 
    image: '/images/waterproof-3.jpg', 
    title: 'ä¸‡åƒå·¥ç¨‹æ¡ˆä¾‹ Â· è§è¯å®åŠ›', 
    subtitle: 'æœåŠ¡ä¸Šæµ·2000+å°åŒºï¼ŒçœŸå®è®°å½•',
    link: '/c-mini/trust/cases'
  }
]

// å½“å‰è½®æ’­ç´¢å¼•
const currentSlide = ref(0)

// è·³è½¬åˆ°æŒ‡å®šå¹»ç¯ç‰‡
const goToSlide = (index) => {
  currentSlide.value = index
  const carouselInner = document.querySelector('.carousel-inner')
  if (carouselInner) {
    // ç›´æ¥è®¾ç½®ä½ç½®ï¼Œä¸ä¸­æ–­åŠ¨ç”»
    carouselInner.style.transform = `translateX(-${index * 33.333}%)`
    // ç§»é™¤CSSåŠ¨ç”»ï¼Œæ”¹ç”¨JavaScriptæ§åˆ¶
    carouselInner.style.animation = 'none'
  }
}

// è‡ªåŠ¨æ»šåŠ¨è½®æ’­å›¾
const autoSlide = () => {
  const carouselInner = document.querySelector('.carousel-inner')
  if (carouselInner) {
    // è®¡ç®—ä¸‹ä¸€å¼ å¹»ç¯ç‰‡ç´¢å¼•
    currentSlide.value = (currentSlide.value + 1) % carouselItems.length
    // è®¾ç½®æ–°ä½ç½®
    carouselInner.style.transform = `translateX(-${currentSlide.value * 33.333}%)`
  }
}

// ç»„ä»¶æŒ‚è½½æ—¶å¯åŠ¨è‡ªåŠ¨æ»šåŠ¨
onMounted(() => {
  // æ¯3ç§’è‡ªåŠ¨åˆ‡æ¢ä¸€æ¬¡å¹»ç¯ç‰‡
  setInterval(autoSlide, 3000)
})

// æ ¸å¿ƒæœåŠ¡æ•°æ®
const coreServices = [
  { id: 1, title: 'å«ç”Ÿé—´æ¼æ°´', icon: 'ğŸ’§' },
  { id: 2, title: 'å¨æˆ¿æ¼æ°´', icon: 'ğŸ³' },
  { id: 3, title: 'å±‹é¡¶è¡¥æ¼', icon: 'ğŸ ' },
  { id: 4, title: 'é˜³å°æ¼æ°´', icon: 'â˜€ï¸' },
  { id: 5, title: 'å¤–å¢™é˜²æ°´', icon: 'ğŸ¢' },
  { id: 6, title: 'å…¶ä»–ä¿®ç¼®', icon: 'ğŸ”¨' }
]

// å®¢æˆ·è¯„ä»·
const customerReviews = [
  { id: 1, name: 'å¼ å…ˆç”Ÿ', content: 'å¸ˆå‚…å¾ˆä¸“ä¸šï¼ŒæœåŠ¡æ€åº¦å¥½ã€‚', rating: 5, project: 'å«ç”Ÿé—´ç»´ä¿®' },
  { id: 2, name: 'æå¥³å£«', content: 'å›½ä¼èƒŒæ™¯æœç„¶ä¸ä¸€æ ·ï¼Œæ¨èï¼', rating: 5, project: 'å±‹é¡¶è¡¥æ¼' }
]

const goToRepairEstimate = () => router.push('/c-mini/repair-estimate')
const goToAppointment = () => router.push('/c-mini/appointment')
</script>

<template>
  <div class="page-container" style="min-height: 100vh; background-color: #f5f7fa; padding-bottom: 100px;">
    
    <div class="header-section" style="background-color: #CC0010; border-bottom-left-radius: 32px; border-bottom-right-radius: 32px; padding-top: 40px; padding-bottom: 80px; position: relative; z-index: 0;">
      <div class="header-content" style="padding: 0 20px;">
        <div class="top-bar" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
          <div class="brand-info" style="display: flex; align-items: center;">
            <img src="/logo.png" class="logo-img" style="width: 40px; height: 40px; border-radius: 50%; background-color: white; padding: 2px; margin-right: 10px; object-fit: contain;" />
            <div class="brand-text">
              <div class="brand-name" style="color: white; font-size: 18px; font-weight: bold;">æœˆæ˜Ÿé˜²æ°´</div>
              <div class="brand-slogan" style="color: rgba(255,255,255,0.8); font-size: 12px;">Since 1947</div>
            </div>
          </div>
          <div class="user-icon">
             <el-icon size="24" color="#fff"><User /></el-icon>
          </div>
        </div>
        

      </div>
    </div>

    <div class="banner-container" style="margin-top: -60px; margin-left: 16px; margin-right: 16px; position: relative; z-index: 10; border-radius: 16px; overflow: hidden; box-shadow: 0 8px 16px rgba(0,0,0,0.1);">
      <div class="carousel" style="width: 100%; height: 160px; position: relative; overflow: hidden;">
        <div class="carousel-inner" style="display: flex; transition: transform 0.5s ease; width: 300%; height: 100%;">
          <div 
            v-for="(item, index) in carouselItems" 
            :key="item.id"
            class="carousel-item" 
            @click="router.push(item.link)"
            style="flex: 1 0 33.333%; height: 100%; position: relative; cursor: pointer;"
          >
            <img :src="item.image" style="width: 100%; height: 100%; object-fit: cover; display: block;" />
            <div style="position: absolute; bottom: 0; left: 0; right: 0; padding: 20px 16px; background: linear-gradient(to top, rgba(0,0,0,0.8), transparent); color: white;">
              <h2 style="font-size: 18px; font-weight: bold; margin: 0 0 4px 0;">{{ item.title }}</h2>
              <p style="font-size: 12px; margin: 0; opacity: 0.9;">{{ item.subtitle }}</p>
            </div>
          </div>
        </div>
        <!-- æŒ‡ç¤ºå™¨ -->
        <div class="carousel-indicators" style="position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); display: flex; gap: 8px;">
          <span 
            v-for="(item, index) in carouselItems" 
            :key="item.id"
            :class="['indicator', { active: currentSlide === index }]"
            style="width: 8px; height: 8px; border-radius: 50%; background: rgba(255,255,255,0.5); cursor: pointer; transition: all 0.3s ease;"
            @click="goToSlide(index)"
          ></span>
        </div>
      </div>
    </div>

    <div class="nav-capsule" style="margin-top: 24px; background: white; margin-left: 20px; margin-right: 20px; border-radius: 20px; padding: 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 12px rgba(0,0,0,0.1); position: relative; z-index: 10;">
      <div class="nav-item" @click="goToRepairEstimate" style="flex: 1; display: flex; flex-direction: column; align-items: center; cursor: pointer;">
        <div class="nav-icon" style="font-size: 24px; margin-bottom: 5px;">ğŸ’§</div>
        <div class="nav-title text-red" style="font-size: 16px; font-weight: bold; color: #E60012;">æ¼æ°´ç»´ä¿®</div>
        <div class="nav-desc" style="font-size: 12px; color: #999; margin-top: 2px;">ä¸Šé—¨æ£€æµ‹/å¿«é€Ÿæ­¢æ¼</div>
      </div>
      <div class="divider" style="width: 1px; height: 40px; background-color: #eee; margin: 0 10px;"></div>
      <div class="nav-item" @click="goToAppointment" style="flex: 1; display: flex; flex-direction: column; align-items: center; cursor: pointer;">
        <div class="nav-icon" style="font-size: 24px; margin-bottom: 5px;">ğŸ </div>
        <div class="nav-title text-gold" style="font-size: 16px; font-weight: bold; color: #F59E0B;">æ–°æˆ¿é˜²æ°´</div>
        <div class="nav-desc" style="font-size: 12px; color: #999; margin-top: 2px;">å…¨å±‹é˜²æ°´/åå¹´è´¨ä¿</div>
      </div>
    </div>

    <div class="section-card" style="margin-top: 15px; background: white; margin-left: 20px; margin-right: 20px; border-radius: 20px; padding: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); position: relative; z-index: 10;">
      <h2 class="section-title" style="font-size: 18px; font-weight: bold; color: #333; margin: 0 0 15px 0; border-left: 4px solid #E60012; padding-left: 10px;">æ ¸å¿ƒæœåŠ¡</h2>
      <div class="service-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">
        <div v-for="service in coreServices" :key="service.id" class="service-item" style="display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: all 0.3s ease;" @click="goToRepairEstimate" @mouseenter="$event.target.style.transform = 'translateY(-2px)'; $event.target.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)'; $event.target.style.backgroundColor = '#FFF5F5';" @mouseleave="$event.target.style.transform = 'translateY(0)'; $event.target.style.boxShadow = 'none'; $event.target.style.backgroundColor = 'transparent';">
          <div class="service-icon-bg" style="width: 44px; height: 44px; background-color: #FFF0F0; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; margin-bottom: 8px; transition: all 0.3s ease;">{{ service.icon }}</div>
          <span class="service-name" style="font-size: 12px; color: #333;">{{ service.title }}</span>
        </div>
      </div>
    </div>

    <!-- æ‰¾å¸ˆå‚…å’Œæ‰¾äº§å“å…¥å£ -->
    <div style="margin: 15px 20px 0; display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
      <!-- æ‰¾å¸ˆå‚… -->
      <div style="background: #F9FAFB; border: 1px solid #E5E7EB; border-radius: 20px; padding: 20px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(0,0,0,0.1); position: relative; z-index: 10;" 
           @mouseenter="$event.target.style.backgroundColor = '#F3F4F6'; $event.target.style.transform = 'translateY(-2px)'; $event.target.style.boxShadow = '0 6px 16px rgba(0,0,0,0.12)';"
           @mouseleave="$event.target.style.backgroundColor = '#F9FAFB'; $event.target.style.transform = 'translateY(0)'; $event.target.style.boxShadow = '0 4px 12px rgba(0,0,0,0.1)';"
           @click="router.push('/c-mini/master-list')">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
          <div style="font-size: 18px; font-weight: bold; color: #374151;">æ‰¾å¸ˆå‚…</div>
          <div style="width: 40px; height: 40px; background: #FEE2E2; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px;">ğŸ‘·</div>
        </div>
        <div style="color: #6B7280; font-size: 13px;">é‡‘ç‰Œå·¥é•¿ï¼Œç»éªŒä¸°å¯Œ</div>
      </div>
      
      <!-- æ‰¾äº§å“ -->
      <div style="background: #F9FAFB; border: 1px solid #E5E7EB; border-radius: 20px; padding: 20px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(0,0,0,0.1); position: relative; z-index: 10;" 
           @mouseenter="$event.target.style.backgroundColor = '#F3F4F6'; $event.target.style.transform = 'translateY(-2px)'; $event.target.style.boxShadow = '0 6px 16px rgba(0,0,0,0.12)';"
           @mouseleave="$event.target.style.backgroundColor = '#F9FAFB'; $event.target.style.transform = 'translateY(0)'; $event.target.style.boxShadow = '0 4px 12px rgba(0,0,0,0.1)';"
           @click="router.push('/c-mini/product-list')">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
          <div style="font-size: 18px; font-weight: bold; color: #374151;">æ‰¾äº§å“</div>
          <div style="width: 40px; height: 40px; background: #DBEAFE; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px;">ğŸ§±</div>
        </div>
        <div style="color: #6B7280; font-size: 13px;">å›½æ ‡ææ–™ï¼Œç¯ä¿å®‰å…¨</div>
      </div>
    </div>



    <div class="section-card" style="margin-top: 15px; background: white; margin-left: 20px; margin-right: 20px; border-radius: 20px; padding: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); position: relative; z-index: 10; cursor: pointer; transition: all 0.3s ease;" 
         @click="router.push('/c-mini/customer-review-list')"
         @mouseenter="$event.target.style.backgroundColor = '#F9FAFB'; $event.target.style.boxShadow = '0 6px 16px rgba(0,0,0,0.12)'"
         @mouseleave="$event.target.style.backgroundColor = 'white'; $event.target.style.boxShadow = '0 4px 12px rgba(0,0,0,0.1)'">
      <h2 class="section-title" style="font-size: 18px; font-weight: bold; color: #333; margin: 0 0 15px 0; border-left: 4px solid #E60012; padding-left: 10px;">å®¢æˆ·è¯„ä»·</h2>
      <div class="review-list" style="display: flex; flex-direction: column; gap: 10px;">
        <div v-for="review in customerReviews" :key="review.id" class="review-item" style="border-bottom: 1px solid #f0f0f0; padding-bottom: 10px;">
          <div class="review-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
            <div class="reviewer-name" style="font-weight: bold; font-size: 14px;">{{ review.name }}</div>
            <el-rate v-model="review.rating" disabled size="small" />
          </div>
          <div class="review-content" style="font-size: 13px; color: #666;">{{ review.content }}</div>
        </div>
      </div>
      <div style="text-align: right; margin-top: 10px; font-size: 12px; color: #E60012;">æŸ¥çœ‹æ›´å¤šè¯„ä»· â†’</div>
    </div>

  </div>
</template>

<style scoped>
/* è½®æ’­å›¾åŠ¨ç”» */
@keyframes carousel-slide {
  0%, 25% {
    transform: translateX(0);
  }
  33%, 58% {
    transform: translateX(-33.333%);
  }
  66%, 91% {
    transform: translateX(-66.666%);
  }
  100% {
    transform: translateX(0);
  }
}

/* æ¿€æ´»æŒ‡ç¤ºå™¨æ ·å¼ */
.carousel-indicators .indicator.active {
  background: white;
  transform: scale(1.2);
}

/* é¡µé¢å®¹å™¨ */
.page-container {
  background-color: #f5f7fa;
  min-height: 100vh;
  padding-bottom: 100px;
}
</style>


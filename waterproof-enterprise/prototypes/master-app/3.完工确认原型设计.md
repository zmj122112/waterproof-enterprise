# 师傅端 - 完工确认原型设计

## 一、页面概述

### 1.1 页面定位
- 为防水工程师傅提供工单完工确认功能
- 支持查看即将完工的工单列表
- 提供完工确认表单，包括施工总结、物料使用统计等
- 支持客户签字确认和满意度评价
- 提供完工报告生成和分享功能

### 1.2 页面结构

```
┌─────────────────────────────────────────────────────────────────────────┐
│                              顶部导航栏                                 │
│  ┌───────────┐  ┌───────────────────────────────────┐  ┌───────────┐   │
│  │  返回     │  │          完工确认                │  │  提交     │   │
│  └───────────┘  └───────────────────────────────────┘  └───────────┘   │
└─────────────────────────────────────────────────────────────────────────┘
┌─────────────────────────────────────────────────────────────────────────┐
│                              工单基本信息                              │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  工单编号：WD20231015001                                      │   │
│  │  服务类型：上门检测（免费）                                    │   │
│  │  客户名称：企业客户A                                             │   │
│  │  施工地址：XX区XX街道XX小区XX号楼XX单元XX室                      │   │
│  └─────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────┘
┌─────────────────────────────────────────────────────────────────────────┐
│                              完工确认表单                               │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                     施工总结                                  │   │
│  │  ┌─────────────────────────────────────────────────────────┐  │   │
│  │  │                     多行文本框                          │  │   │
│  │  │  请详细描述施工情况，包括施工内容、解决的问题、注意事项等    │  │   │
│  │  └─────────────────────────────────────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                     物料使用统计                              │   │
│  │  ┌─────────────────────────────────────────────────────────┐  │   │
│  │  │  物料名称  │  规格型号  │  使用数量  │  单位      │  │   │  │
│  │  └─────────────────────────────────────────────────────────┘  │   │
│  │  ┌─────────────────────────────────────────────────────────┐  │   │
│  │  │  防水材料A  │  10kg/桶    │  2        │  桶        │  │   │  │
│  │  └─────────────────────────────────────────────────────────┘  │   │
│  │  ┌─────────────────────────────────────────────────────────┐  │   │
│  │  │  施工工具B  │  套        │  1        │  套        │  │   │  │
│  │  └─────────────────────────────────────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                     施工照片对比                              │   │
│  │  ┌─────────────────────────────────┐  ┌─────────────────────┐  │   │
│  │  │                     施工前照片                          │  │   │
│  │  │  ┌───────────┐  ┌───────────┐  └─────────────────────┘  │   │
│  │  │  │  照片1    │  │  照片2    │  ┌─────────────────────┐  │   │
│  │  │  └───────────┘  └───────────┘  │                     │  │   │
│  │  └─────────────────────────────────┘  │                     │  │   │
│  │                                       │                     │  │   │
│  │  ┌─────────────────────────────────┐  │                     │  │   │
│  │  │                     施工后照片                          │  │   │
│  │  │  ┌───────────┐  ┌───────────┐  │                     │  │   │
│  │  │  │  照片3    │  │  照片4    │  │                     │  │   │
│  │  │  └───────────┘  └───────────┘  │                     │  │   │
│  │  └─────────────────────────────────┘  │                     │  │   │
│  │                                       └─────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                     客户确认信息                              │   │
│  │  ┌───────────────┐  ┌─────────────────────────────────────┐  │   │
│  │  │  客户签名：   │  │  签名区域                          │  │   │
│  │  └───────────────┘  └─────────────────────────────────────┘  │   │
│  │  ┌───────────────┐  ┌─────────────────────────────────────┐  │   │
│  │  │  确认日期：   │  │  2023-10-15                      │  │   │
│  │  └───────────────┘  └─────────────────────────────────────┘  │   │
│  │  ┌───────────────┐  ┌─────────────────────────────────────┐  │   │
│  │  │  满意度评价： │  │  ★★★★☆                              │  │   │
│  │  └───────────────┘  └─────────────────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                     完工报告选项                              │   │
│  │  ┌─────────────────────────────────────────────────────────┐  │   │
│  │  │  □ 生成完工报告PDF                                     │  │   │
│  │  │  □ 发送报告给客户邮箱                                   │  │   │
│  │  │  □ 分享报告给微信好友                                   │  │   │
│  │  └─────────────────────────────────────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────┘
```

### 1.3 交互设计

#### 1.3.1 顶部导航栏
- **返回**：点击返回上一页
- **提交**：点击提交完工确认信息
  - 动画效果：点击时显示提交中提示，提交成功后显示成功提示

#### 1.3.2 工单基本信息
- 显示当前完工确认关联的工单基本信息
- 支持点击查看完整工单详情

#### 1.3.3 完工确认表单
- **施工总结**：
  - 支持多行文本输入，实时显示输入字数
  - 提供常用施工总结模板，方便快速填写
  - 动画效果：输入时的平滑滚动效果

- **物料使用统计**：
  - 自动汇总施工过程中使用的物料
  - 显示物料名称、规格型号、使用数量和单位
  - 支持点击查看物料明细
  - 动画效果：列表项悬停时的背景色变化

- **施工照片对比**：
  - 左右对比显示施工前和施工后的照片
  - 支持点击照片放大预览
  - 动画效果：
    - 照片预览时的放大动画
    - 对比显示时的平滑过渡效果

- **客户确认信息**：
  - **客户签名**：点击签名区域，弹出签名画板，支持手写签名
  - **确认日期**：自动填充当前日期，支持修改
  - **满意度评价**：点击星星进行评分，支持1-5星评价
  - 动画效果：
    - 签名画板弹出/收起时的滑动动画
    - 签名时的平滑绘制效果
    - 评分时的星星填充动画

- **完工报告选项**：
  - 提供多种完工报告处理选项，包括生成PDF、发送邮箱和分享微信
  - 支持多选
  - 动画效果：
    - 复选框勾选/取消勾选时的动画效果
    - 选项悬停时的背景色变化

### 1.4 设计规范

#### 1.4.1 颜色方案
- 主色调：蓝色 (#1890ff) - 代表专业、信任
- 辅助色：
  - 成功色：绿色 (#52c41a) - 代表提交成功
  - 警告色：黄色 (#faad14) - 代表提示信息
  - 错误色：红色 (#ff4d4f) - 代表错误信息
- 背景色：白色 (#ffffff)
- 文字色：深灰色 (#333333)、中灰色 (#666666)、浅灰色 (#999999)
- 边框色：淡灰色 (#e8e8e8)

#### 1.4.2 字体方案
- 标题：16px - 18px，粗体
- 正文：14px - 16px，常规
- 辅助文字：12px，常规
- 工单编号：14px，粗体，蓝色 (#1890ff)

#### 1.4.3 图标方案
- 使用简洁、直观的线性图标
- 图标颜色与文字颜色保持一致
- 交互元素图标添加反馈效果
- 状态图标：使用不同颜色区分不同状态

### 1.5 页面原型图

#### 1.5.1 完工确认原型图

![完工确认原型图](images/completion-confirmation.png)

#### 1.5.2 交互流程图

```
┌─────────────────────────────────────────────────────────────────────────┐
│                              完工确认页面                              │
├─────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                  填写施工总结                                │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                               │                                       │
│                               ▼                                       │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                  查看物料使用统计                              │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                               │                                       │
│                               ▼                                       │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                  查看施工照片对比                              │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                               │                                       │
│                               ▼                                       │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                  完成客户确认信息                              │   │
│  │                  ┌─────────────────┐                           │   │
│  │                  │  客户签名       │                           │   │
│  │                  │  确认日期       │                           │   │
│  │                  │  满意度评价     │                           │   │
│  │                  └─────────────────┘                           │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                               │                                       │
│                               ▼                                       │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                  选择完工报告选项                              │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                               │                                       │
│                               ▼                                       │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                  点击「提交」按钮                                │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                               │                                       │
│                               ▼                                       │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                  提交完工确认信息                              │   │
│  │                  ┌─────────────────┐                           │   │
│  │                  │  提交成功       │  ──►  显示成功提示           │   │
│  │                  │  提交失败       │  ──►  显示错误提示           │   │
│  │                  └─────────────────┘                           │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                               │                                       │
│                               ▼                                       │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                  生成并处理完工报告                              │   │
│  │                  ┌─────────────────┐                           │   │
│  │                  │  生成PDF报告     │                           │   │
│  │                  │  发送报告邮件     │                           │   │
│  │                  │  分享报告微信     │                           │   │
│  │                  └─────────────────┘                           │   │
│  └─────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────┘
```

### 1.6 技术实现建议

#### 1.6.1 前端框架
- 使用微信小程序原生开发
- 或使用 Taro、uni-app 等跨端框架

#### 1.6.2 交互实现
- 使用微信小程序的 animation API 实现动画效果
- 使用 wx.canvas API 实现手写签名功能
- 使用 wx.showToast、wx.showLoading 等 API 实现反馈效果
- 使用第三方 PDF 生成库实现完工报告生成

#### 1.6.3 数据来源
- 工单数据：调用后台工单管理服务 API
- 施工记录数据：调用后台施工记录服务 API
- 物料数据：调用后台物料管理服务 API

## 二、原型使用说明

### 2.1 如何查看原型
- 使用微信开发者工具打开原型文件夹
- 或使用在线原型工具（如 Axure、Figma）查看交互原型

### 2.2 如何进行交互测试
- 填写施工总结，测试表单输入
- 查看物料使用统计，测试列表交互
- 查看施工照片对比，测试照片预览
- 完成客户签名和满意度评价，测试签名和评分功能
- 选择完工报告选项，测试复选框交互
- 点击提交按钮，测试提交功能

### 2.3 如何提供反馈
- 记录需要修改的页面或交互
- 标注具体的修改建议
- 提供参考示例（如有）

## 三、后续迭代计划

### 3.1 优化施工总结模板，支持自定义模板
### 3.2 增加完工报告的更多格式支持，如Word、HTML等
### 3.3 优化客户签名功能，支持电子签名认证
### 3.4 增加完工数据的统计分析功能
### 3.5 优化移动端适配，确保在不同设备上显示正常
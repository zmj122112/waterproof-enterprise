<script setup>
// å¸ˆå‚…åˆ—è¡¨é¡µé¢
import { ref, onMounted } from 'vue'
import { useRouter } from 'vue-router'
import { ArrowLeft, Search } from '@element-plus/icons-vue'

const router = useRouter()

// å¸ˆå‚…åˆ—è¡¨æ•°æ®
const masters = ref([
  {
    id: 1,
    name: 'å¼ å»ºå›½',
    avatar: 'https://via.placeholder.com/100/FF0000/FFFFFF?text=å¼ å»ºå›½',
    jobNumber: 'YX20250001',
    title: 'é‡‘ç‰Œå·¥é•¿',
    rating: 4.9,
    experience: '15å¹´',
    serviceCount: 1280,
    region: 'ä¸Šæµ·å¸‚Â·æµ¦ä¸œæ–°åŒº',
    certifications: ['å®åè®¤è¯', 'é‡‘ç‰Œå·¥é•¿', 'æŒè¯ä¸Šå²—', 'å›½ä¼èƒŒæ™¯', 'æ“…é•¿ç–‘éš¾æ‚ç—‡']
  },
  {
    id: 2,
    name: 'æå¼º',
    avatar: 'https://via.placeholder.com/100/FF0000/FFFFFF?text=æå¼º',
    jobNumber: 'YX20250002',
    title: 'é«˜çº§æŠ€å¸ˆ',
    rating: 4.8,
    experience: '8å¹´',
    serviceCount: 860,
    region: 'ä¸Šæµ·å¸‚Â·æµ¦ä¸œæ–°åŒº',
    certifications: ['å®åè®¤è¯', 'é«˜çº§æŠ€å¸ˆ', 'æŒè¯ä¸Šå²—', 'å›½ä¼èƒŒæ™¯']
  },
  {
    id: 3,
    name: 'ç‹ç£Š',
    avatar: 'https://via.placeholder.com/100/FF0000/FFFFFF?text=ç‹ç£Š',
    jobNumber: 'YX20250003',
    title: 'èµ„æ·±å¸ˆå‚…',
    rating: 4.7,
    experience: '10å¹´',
    serviceCount: 980,
    region: 'ä¸Šæµ·å¸‚Â·æµ¦ä¸œæ–°åŒº',
    certifications: ['å®åè®¤è¯', 'èµ„æ·±å¸ˆå‚…', 'æŒè¯ä¸Šå²—', 'å›½ä¼èƒŒæ™¯']
  }
])

// æœç´¢å…³é”®è¯
const searchKeyword = ref('')

// è¿”å›é¦–é¡µ
const goBack = () => {
  router.push('/c-mini/home')
}

// è·³è½¬åˆ°å¸ˆå‚…è¯¦æƒ…
const goToMasterDetail = (masterId) => {
  console.log('è·³è½¬åˆ°å¸ˆå‚…è¯¦æƒ…ï¼ŒID:', masterId)
  router.push('/c-mini/master-detail/' + masterId)
}

// æœç´¢å¸ˆå‚…
const searchMasters = () => {
  console.log('æœç´¢å¸ˆå‚…:', searchKeyword.value)
  // è¿™é‡Œå¯ä»¥æ·»åŠ æœç´¢é€»è¾‘
}

onMounted(() => {
  console.log('å¸ˆå‚…åˆ—è¡¨é¡µé¢åŠ è½½')
})
</script>

<template>
  <div class="master-list-page" style="min-height: 100vh; background-color: #f5f7fa; padding-bottom: 100px;">
    <!-- é¡µé¢æ ‡é¢˜æ  -->
    <div style="background-color: #CC0010; border-bottom-left-radius: 32px; border-bottom-right-radius: 32px; padding: 20px 20px 30px; text-align: center; position: relative;">
      <a href="/c-mini/home" style="position: absolute; left: 10px; top: 10px; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px; cursor: pointer; z-index: 99999; background: rgba(255,255,255,0.1); border-radius: 50%; text-decoration: none;">
        <el-icon><ArrowLeft /></el-icon>
      </a>
      <div style="color: white; font-size: 20px; font-weight: 700; margin: 0;">æ‰¾å¸ˆå‚…</div>
    </div>

    <!-- æœç´¢æ  -->
    <div style="padding: 16px;">
      <div style="background: white; border: 1px solid #E5E7EB; border-radius: 20px; padding: 8px 16px; display: flex; align-items: center; gap: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
        <el-icon style="color: #6b7280;"><Search /></el-icon>
        <input 
          v-model="searchKeyword" 
          type="text" 
          placeholder="è¯·è¾“å…¥å§“åæˆ–å·¥å·æŸ¥è¯¢" 
          style="flex: 1; border: none; outline: none; font-size: 14px; color: #111827;"
          @keyup.enter="searchMasters"
        >
        <button 
          @click="searchMasters" 
          style="background: #CC0010; color: white; border: none; padding: 6px 16px; border-radius: 12px; font-size: 14px; font-weight: 500; cursor: pointer;"
        >
          æœç´¢
        </button>
      </div>
    </div>

    <!-- å¸ˆå‚…åˆ—è¡¨ -->
    <div style="padding: 0 16px;">
      <div style="font-size: 14px; color: #6b7280; margin-bottom: 12px;">æŸ¥è¯¢ç»“æœï¼š({{ masters.length }}æ¡ä¿¡æ¯)</div>
      
      <!-- å¸ˆå‚…åˆ—è¡¨é¡¹ -->
      <div v-for="master in masters" :key="master.id" 
           style="background: white; border: 1px solid #E5E7EB; border-radius: 20px; padding: 16px; margin-bottom: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); cursor: pointer; transition: all 0.3s ease;" 
           @click="goToMasterDetail(master.id)"
           @mouseenter="$event.target.style.boxShadow = '0 6px 20px rgba(0,0,0,0.15)'"
           @mouseleave="$event.target.style.boxShadow = '0 4px 12px rgba(0,0,0,0.1)'">
        <!-- å¸ˆå‚…åŸºæœ¬ä¿¡æ¯ -->
        <div style="display: flex; gap: 16px; margin-bottom: 12px;">
          <div style="width: 60px; height: 60px; border-radius: 50%; background: #CC0010; border: 2px solid #CC0010; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px; font-weight: bold;">
            {{ master.name.charAt(0) }}
          </div>
          <div style="flex: 1;">
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
              <div style="font-weight: 500; font-size: 16px; color: #111827;">{{ master.name }}</div>
              <div style="background: #CC0010; color: white; font-size: 12px; padding: 2px 8px; border-radius: 10px;">{{ master.title }}</div>
            </div>
            <div style="font-size: 14px; color: #6b7280; margin-bottom: 8px;">å·¥å·ï¼š{{ master.jobNumber }}</div>
            <div style="display: flex; gap: 16px;">
              <div style="font-size: 12px; color: #9ca3af;">æ‰€åœ¨åŒºåŸŸï¼š{{ master.region }}</div>
              <div style="font-size: 12px; color: #9ca3af;">ä»ä¸šå¹´é™ï¼š{{ master.experience }}</div>
            </div>
          </div>
          <div style="display: flex; align-items: center; gap: 8px;">
            <div style="display: flex; align-items: center; gap: 4px;">
              <span style="font-size: 14px; color: #CC0010; font-weight: 500;">{{ master.rating }}</span>
              <span style="font-size: 12px; color: #6b7280;">è¯„åˆ†</span>
            </div>
          </div>
        </div>
        
        <!-- è®¤è¯æ ‡ç­¾ -->
        <div style="display: flex; flex-wrap: wrap; gap: 8px;">
          <div v-for="(cert, index) in master.certifications" :key="index" 
               :style="{
                 background: cert === 'é‡‘ç‰Œå·¥é•¿' ? '#FEE2E2' : '#DBEAFE',
                 color: cert === 'é‡‘ç‰Œå·¥é•¿' ? '#CC0010' : '#3B82F6',
                 fontSize: '12px',
                 padding: '2px 8px',
                 borderRadius: '12px',
                 border: '1px solid ' + (cert === 'é‡‘ç‰Œå·¥é•¿' ? '#FECACA' : '#BFDBFE')
               }">
            {{ cert }}
          </div>
          <div style="background: #D1FAE5; color: #059669; font-size: 12px; padding: 2px 8px; border-radius: 12px; border: 1px solid #A7F3D0;">
            æœˆæ˜Ÿé˜²æ°´å®˜æ–¹è®¤è¯
          </div>
        </div>
      </div>
      
      <!-- ç©ºçŠ¶æ€ -->
      <div v-if="masters.length === 0" style="background: white; border-radius: 20px; padding: 40px 20px; text-align: center; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
        <div style="font-size: 48px; margin-bottom: 16px;">ğŸ‘·</div>
        <div style="font-size: 16px; color: #6b7280; margin-bottom: 8px;">æš‚æ— å¸ˆå‚…ä¿¡æ¯</div>
        <div style="font-size: 14px; color: #9ca3af;">è¯·å°è¯•å…¶ä»–æœç´¢æ¡ä»¶</div>
      </div>
    </div>
  </div>
</template>

<style scoped>
.master-list-page {
  padding-bottom: 100px;
}
</style>